---
import './../styles/index.css'
import MainLayout from '../layouts/MainLayout.astro'
import ArticleCard from '../components/ArticleCard.astro';
import MostRecentArticle from '../components/MostRecentArticle.astro';
import { HOMEPAGE_ARTICLE_LIMIT } from '../constants';

import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';

const allBlogArticles: CollectionEntry<'blog'>[] = (await getCollection('blog')).sort((a:CollectionEntry<'blog'>,b:CollectionEntry<'blog'>)=> b.data.pubDate.valueOf()- a.data.pubDate.valueOf())

const mostRecentArticle: CollectionEntry<'blog'> = allBlogArticles[0]
const otherArticles: CollectionEntry<'blog'>[] = allBlogArticles.slice(1) 
---

<MainLayout>
	<div class="main-container">
		<div class="header-container">
			<div class="title-container">
				<h1>Les Désirs de l'Âme</h1>
				<h2>Poésies Passionnelles, Amoureuses et Spirituelles</h2>
			</div>
			<div class="recent-article">
				<MostRecentArticle article={mostRecentArticle}/>
			</div>
		</div>
		
		<div class="articles-grid">
			{otherArticles.slice(0,HOMEPAGE_ARTICLE_LIMIT).map((article)=> <ArticleCard article={article}/>)}
		</div>

	</div>
</MainLayout>
